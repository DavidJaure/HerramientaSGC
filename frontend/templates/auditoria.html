<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>AuditorÃ­a ISO 9001:2015</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 font-sans">

<div class="max-w-5xl mx-auto py-10 px-6">
  <h1 class="text-3xl font-bold text-blue-700 text-center mb-8">âœ… AuditorÃ­a ISO 9001:2015 (CapÃ­tulos 4 al 10)</h1>

  <form action="/iso9001/auditoria" method="POST" class="space-y-6 bg-white shadow-md rounded-xl p-6">

    <!-- CapÃ­tulos 4 al 10 (Checklist completo) -->
    {% for cap, items in [
      ("4: Contexto de la organizaciÃ³n", [
        ("4.1", "Â¿La organizaciÃ³n ha identificado factores internos y externos que afectan al SGC?"),
        ("4.2", "Â¿Se han identificado las partes interesadas y sus necesidades?"),
        ("4.3", "Â¿Se definiÃ³ el alcance del SGC, considerando productos, servicios y exclusiones?"),
        ("4.4", "Â¿Existe un mapa de procesos con entradas, salidas, secuencia e interacciones?")
      ]),
      ("5: Liderazgo", [
        ("5.1", "Â¿La alta direcciÃ³n demuestra liderazgo y compromiso con el SGC?"),
        ("5.2", "Â¿EstÃ¡ definida y comunicada la polÃ­tica de calidad?"),
        ("5.3", "Â¿Se han asignado roles, responsabilidades y autoridades dentro del SGC?")
      ]),
      ("6: PlanificaciÃ³n", [
        ("6.1", "Â¿Se han identificado riesgos y oportunidades? Â¿Existe una matriz de riesgos?"),
        ("6.2", "Â¿EstÃ¡n definidos objetivos de calidad, medibles y con seguimiento?"),
        ("6.3", "Â¿Se planifican cambios al SGC de manera controlada?")
      ]),
      ("7: Soporte", [
        ("7.1", "Â¿Se cuenta con recursos adecuados (infraestructura, ambiente, tecnologÃ­a)?"),
        ("7.2", "Â¿El personal es competente y hay registros de capacitaciÃ³n?"),
        ("7.3", "Â¿Se asegura la toma de conciencia sobre polÃ­tica y objetivos de calidad?"),
        ("7.4", "Â¿Se mantiene comunicaciÃ³n interna y externa efectiva?"),
        ("7.5", "Â¿La informaciÃ³n documentada (procedimientos, registros) estÃ¡ controlada?")
      ]),
      ("8: OperaciÃ³n", [
        ("8.1", "Â¿Se planifican y controlan las operaciones bajo condiciones controladas?"),
        ("8.2", "Â¿Se gestionan adecuadamente los requisitos del cliente (contratos, pedidos)?"),
        ("8.3", "Â¿Hay control en el diseÃ±o y desarrollo (cuando aplica)?"),
        ("8.4", "Â¿Los proveedores externos son evaluados y controlados?"),
        ("8.5", "Â¿La producciÃ³n/servicio cumple requisitos definidos (instrucciones, equipos)?"),
        ("8.6", "Â¿Se realizan controles de liberaciÃ³n de productos/servicios?"),
        ("8.7", "Â¿Los productos/servicios no conformes se controlan y registran?")
      ]),
      ("9: EvaluaciÃ³n del desempeÃ±o", [
        ("9.1", "Â¿Se hace seguimiento, mediciÃ³n y anÃ¡lisis de indicadores de calidad?"),
        ("9.2", "Â¿Se realizan auditorÃ­as internas planificadas y con registros?"),
        ("9.3", "Â¿La alta direcciÃ³n realiza la revisiÃ³n por la direcciÃ³n con entradas/salidas claras?")
      ]),
      ("10: Mejora", [
        ("10.1", "Â¿Se gestionan oportunidades de mejora continuamente?"),
        ("10.2", "Â¿Se aplican acciones correctivas para tratar no conformidades?"),
        ("10.3", "Â¿Se mejora continuamente la eficacia del SGC?")
      ])
    ] %}
    <section>
      <h2 class="text-lg font-semibold bg-gray-200 rounded-md px-3 py-2 mt-4">ðŸ“Œ CapÃ­tulo {{ cap }}</h2>
      <div class="space-y-2 mt-2">
        {% for id, texto in items %}
        <label class="flex items-center"><input type="checkbox" name="{{ id }}" class="w-5 h-5 text-blue-600"><span class="ml-2">{{ id }} {{ texto }}</span></label>
        {% endfor %}
      </div>
    </section>
    {% endfor %}

    <!-- Observaciones -->
    <section>
      <h2 class="text-xl font-semibold mt-6 mb-2">Observaciones</h2>
      <textarea name="observaciones" rows="4" class="w-full border rounded-md p-2" placeholder="Escribe tus observaciones aquÃ­..."></textarea>
    </section>

    <!-- Plantillas completadas -->
    <h1 class="text-2xl font-bold text-center mt-6 mb-4">ðŸ“‚ Plantillas de ImplementaciÃ³n</h1>
    <ul class="space-y-3 max-w-xl mx-auto">
      {% for plantilla in plantillas %}
        <li class="p-4 rounded-lg {{ 'bg-green-200 text-green-800' if plantilla.completada else 'bg-red-200 text-red-800' }}">
          {{ plantilla.nombre }}
          {% if plantilla.completada %}
            <a href="/descargar/{{ plantilla.nombre }}" class="ml-4 px-3 py-1 bg-green-600 text-white rounded hover:bg-green-700">ðŸ“¥ Descargar</a>
          {% endif %}
        </li>
      {% endfor %}
    </ul>

    <!-- Botones -->
    <div class="flex justify-center gap-4 pt-6">
      <button type="submit" class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg">ðŸ’¾ Guardar Checklist</button>
      <a href="/generar_pdf" class="bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded-lg">ðŸ“„ Generar Informe PDF</a>
    </div>

  </form>
</div>

</body>
</html>
