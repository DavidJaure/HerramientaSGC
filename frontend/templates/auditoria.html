<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Auditor칤a ISO 9001</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 font-sans">

<div class="max-w-6xl mx-auto py-10 px-6">
  <h1 class="text-4xl font-bold text-purple-700 text-center mb-8"> Auditor칤a ISO 9001(Cap칤tulos 4 al 10)</h1>

  <form action="/iso9001/auditoria" method="POST" class="space-y-8 bg-white shadow-lg rounded-2xl p-8">

    <!-- Cap칤tulos 4 al 10 (Checklist completo) -->
    {% for cap, items in [
      ("4: Contexto de la organizaci칩n", [
        ("4.1", "쯃a organizaci칩n ha identificado factores internos y externos que afectan al SGC?"),
        ("4.2", "쯉e han identificado las partes interesadas y sus necesidades?"),
        ("4.3", "쯉e defini칩 el alcance del SGC, considerando productos, servicios y exclusiones?"),
        ("4.4", "쮼xiste un mapa de procesos con entradas, salidas, secuencia e interacciones?")
      ]),
      ("5: Liderazgo", [
        ("5.1", "쯃a alta direcci칩n demuestra liderazgo y compromiso con el SGC?"),
        ("5.2", "쮼st치 definida y comunicada la pol칤tica de calidad?"),
        ("5.3", "쯉e han asignado roles, responsabilidades y autoridades dentro del SGC?")
      ]),
      ("6: Planificaci칩n", [
        ("6.1", "쯉e han identificado riesgos y oportunidades? 쮼xiste una matriz de riesgos?"),
        ("6.2", "쮼st치n definidos objetivos de calidad, medibles y con seguimiento?"),
        ("6.3", "쯉e planifican cambios al SGC de manera controlada?")
      ]),
      ("7: Soporte", [
        ("7.1", "쯉e cuenta con recursos adecuados (infraestructura, ambiente, tecnolog칤a)?"),
        ("7.2", "쮼l personal es competente y hay registros de capacitaci칩n?"),
        ("7.3", "쯉e asegura la toma de conciencia sobre pol칤tica y objetivos de calidad?"),
        ("7.4", "쯉e mantiene comunicaci칩n interna y externa efectiva?"),
        ("7.5", "쯃a informaci칩n documentada (procedimientos, registros) est치 controlada?")
      ]),
      ("8: Operaci칩n", [
        ("8.1", "쯉e planifican y controlan las operaciones bajo condiciones controladas?"),
        ("8.2", "쯉e gestionan adecuadamente los requisitos del cliente (contratos, pedidos)?"),
        ("8.3", "쮿ay control en el dise침o y desarrollo (cuando aplica)?"),
        ("8.4", "쯃os proveedores externos son evaluados y controlados?"),
        ("8.5", "쯃a producci칩n/servicio cumple requisitos definidos (instrucciones, equipos)?"),
        ("8.6", "쯉e realizan controles de liberaci칩n de productos/servicios?"),
        ("8.7", "쯃os productos/servicios no conformes se controlan y registran?")
      ]),
      ("9: Evaluaci칩n del desempe침o", [
        ("9.1", "쯉e hace seguimiento, medici칩n y an치lisis de indicadores de calidad?"),
        ("9.2", "쯉e realizan auditor칤as internas planificadas y con registros?"),
        ("9.3", "쯃a alta direcci칩n realiza la revisi칩n por la direcci칩n con entradas/salidas claras?")
      ]),
      ("10: Mejora", [
        ("10.1", "쯉e gestionan oportunidades de mejora continuamente?"),
        ("10.2", "쯉e aplican acciones correctivas para tratar no conformidades?"),
        ("10.3", "쯉e mejora continuamente la eficacia del SGC?")
      ])
    ] %}
    <section class="border-l-4 border-purple-600 pl-4 py-3 bg-gray-50 rounded-md shadow-sm">
      <h2 class="text-lg font-semibold text-purple-700 mb-2"> Cap칤tulo {{ cap }}</h2>
      <div class="space-y-2">
        {% for id, texto in items %}
        <label class="flex items-center bg-white rounded-md p-2 shadow-sm hover:bg-blue-50 transition">
          <input type="checkbox" name="{{ id }}" class="w-5 h-5 text-blue-600">
          <span class="ml-2">{{ id }} {{ texto }}</span>
        </label>
        {% endfor %}
      </div>
    </section>
    {% endfor %}

    <!-- Observaciones -->
    <section>
      <h2 class="text-xl font-semibold mt-6 mb-2 text-purple-700">游닇 Observaciones</h2>
      <textarea name="observaciones" rows="5" class="w-full border border-gray-300 rounded-lg p-3 focus:ring-2 focus:ring-blue-300" placeholder="Escribe tus observaciones aqu칤..."></textarea>
    </section>

    <!-- Plantillas completadas -->
    <h1 class="text-2xl font-bold text-center mt-8 mb-4 text-purple-700"> Plantillas de Implementaci칩n</h1>
    <ul class="space-y-3 max-w-xl mx-auto">
      {% for plantilla in plantillas %}
        <li class="flex justify-between items-center p-4 rounded-lg shadow-md {{ 'bg-green-100 text-green-800' if plantilla.completada else 'bg-red-100 text-red-800' }}">
          <span>{{ plantilla.nombre }}</span>
          {% if plantilla.completada %}
            <a href="/descargar/{{ plantilla.nombre }}" class="ml-4 px-3 py-1 bg-green-600 text-white rounded hover:bg-green-700 transition">游닌 Descargar</a>
          {% endif %}
        </li>
      {% endfor %}
    </ul>

    <!-- Botones -->
    <div class="flex justify-center gap-4 pt-6">
      <button type="submit" class="bg-purple-600 hover:bg-purple-700 text-white px-6 py-2 rounded-lg shadow-md transition">游 Guardar Checklist</button>
      <a href="/generar_pdf" class="bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded-lg shadow-md transition">游늯 Generar Informe PDF</a>
    </div>

  </form>
</div>

</body>
</html>
