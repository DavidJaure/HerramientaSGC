<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Informe Auditor√≠a ISO 9001</title>
<style>
body { font-family: 'Arial', sans-serif; margin: 20px; color: #333; background: #f3f4f6; }
h1 { text-align: center; background-color: #1E40AF; color: white; padding: 15px 0; border-radius: 8px; }
h2 { color: #1D4ED8; margin-top: 20px; margin-bottom: 5px; }
.card { background: #ffffff; border-radius: 10px; padding: 15px; margin-bottom: 15px; box-shadow: 0 3px 6px rgba(0,0,0,0.1); }
.info-item { margin: 3px 0; }
.checkbox-item { margin: 5px 0; display: flex; align-items: center; }
.checkbox-item span { margin-left: 8px; }
.status-completed { color: #16A34A; font-weight: bold; }
.status-pending { color: #DC2626; font-weight: bold; }
.table { width: 100%; border-collapse: collapse; margin-top: 10px; }
.table th, .table td { border: 1px solid #cbd5e1; padding: 8px; text-align: center; font-size: 12px; }
.table th { background-color: #e0e7ff; color: #1D4ED8; font-weight: bold; }
.table tr:nth-child(even) { background-color: #f9fafb; }
.observaciones { margin-top: 15px; padding: 12px; border-left: 4px solid #1D4ED8; background: #DBEAFE; border-radius: 6px; font-size: 13px; }
.section-title { border-bottom: 2px solid #1D4ED8; padding-bottom: 4px; margin-bottom: 10px; font-size: 14px; font-weight: bold; }
.icon { font-size: 14px; }
</style>
</head>
<body>

<h1>‚úÖ Informe Auditor√≠a ISO 9001:2015</h1>
<p><strong>Fecha de auditor√≠a:</strong> {{ fecha }}</p>

<!-- Datos del auditor -->
<div class="card">
  <div class="section-title">Datos del Auditor</div>
  <p class="info-item"><strong>Nombre:</strong> {{ auditor.nombre }}</p>
  <p class="info-item"><strong>Correo:</strong> {{ auditor.correo }}</p>
</div>

<!-- Datos de la empresa -->
<div class="card">
  <div class="section-title">Datos de la Empresa</div>
  {% for clave, valor in empresa.items() %}
  <p class="info-item"><strong>{{ clave }}:</strong> {{ valor }}</p>
  {% endfor %}
</div>

<!-- Checklist completo -->
<h2>Checklist de Auditor√≠a</h2>
{% set cap√≠tulos = {
"4: Contexto de la organizaci√≥n": ["4.1","4.2","4.3","4.4"],
"5: Liderazgo": ["5.1","5.2","5.3"],
"6: Planificaci√≥n": ["6.1","6.2","6.3"],
"7: Soporte": ["7.1","7.2","7.3","7.4","7.5"],
"8: Operaci√≥n": ["8.1","8.2","8.3","8.4","8.5","8.6","8.7"],
"9: Evaluaci√≥n del desempe√±o": ["9.1","9.2","9.3"],
"10: Mejora": ["10.1","10.2","10.3"]
} %}
{% for cap, items in cap√≠tulos.items() %}
<div class="card">
  <div class="section-title">üìå Cap√≠tulo {{ cap }}</div>
  {% for item in items %}
    <div class="checkbox-item">
      <span class="icon">{{ '‚úî' if checklist[item] else '‚úñ' }}</span>
      <span class="{{ 'status-completed' if checklist[item] else 'status-pending' }}">
        {{ item }} - {{ 'Completado' if checklist[item] else 'Pendiente' }}
      </span>
    </div>
  {% endfor %}
</div>
{% endfor %}

<!-- Plantillas -->
<h2>Plantillas de Implementaci√≥n</h2>
<table class="table">
  <thead>
    <tr>
      <th>Plantilla</th>
      <th>Estado</th>
      <th>Fecha</th>
    </tr>
  </thead>
  <tbody>
    {% for p in plantillas %}
    <tr>
      <td>{{ p.nombre }}</td>
      <td class="{{ 'status-completed' if p.completada else 'status-pending' }}">
        {{ 'Completada' if p.completada else 'Pendiente' }}
      </td>
      <td>{{ p.fecha if p.fecha else '-' }}</td>
    </tr>
    {% endfor %}
  </tbody>
</table>

<!-- Observaciones -->
<h2>Observaciones</h2>
<div class="observaciones">
  {{ observaciones }}
</div>

</body>
</html>
